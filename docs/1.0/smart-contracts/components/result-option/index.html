<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="CosmWasm Documentation" href="/opensearch.xml"><title data-react-helmet="true">Result and Option | CosmWasm Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.cosmwasm.com/docs/1.0/smart-contracts/components/result-option"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-docs-current"><meta data-react-helmet="true" property="og:title" content="Result and Option | CosmWasm Documentation"><meta data-react-helmet="true" name="description" content="In Rust, using Result and Option types is very common. If you&#x27;ve used fp-ts in Typescript, functional features in"><meta data-react-helmet="true" property="og:description" content="In Rust, using Result and Option types is very common. If you&#x27;ve used fp-ts in Typescript, functional features in"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.cosmwasm.com/docs/1.0/smart-contracts/components/result-option"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/docs/1.0/smart-contracts/components/result-option" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/fr/docs/1.0/smart-contracts/components/result-option" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/docs/1.0/smart-contracts/components/result-option" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.561bf0c2.css">
<link rel="preload" href="/assets/js/runtime~main.098888ff.js" as="script">
<link rel="preload" href="/assets/js/main.2b084044.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_dark.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/1.0/">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/dev-academy/intro">Dev Academy</a></li><li><a class="dropdown__link" href="/tutorials/hijack-escrow/intro">Tutorials</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">dApps</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cw-plus/0.9.0/overview">cw-plus</a></li></ul></div><a class="navbar__item navbar__link" href="/ecosystem/overview">Ecosystem</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/1.0/">1.0</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/1.0/smart-contracts/components/result-option">1.0</a></li><li><a class="dropdown__link" href="/docs/0.16/">0.16</a></li><li><a class="dropdown__link" href="/docs/0.14/">0.14</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/1.0/smart-contracts/components/result-option" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/fr/docs/1.0/smart-contracts/components/result-option" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">franÃ§ais</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_3h0W"><img src="/img/logo.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo_dark.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--dark_hz6m"></a><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/1.0/">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/intro">Your First Contract</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/installation">Installation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/setting-env">Setting Up Environment</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/compile-contract">Downloading and Compiling Contract</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/interact-with-contract">Uploading and Interacting</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/getting-started/next-steps">Next Steps</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Smart Contracts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/lifecycle">Lifecycle</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Components</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/components/message">Messages</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.0/smart-contracts/components/result-option">Result and Option</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">State</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/components/entry-points">Entry points</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/components/query">Query</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/components/events">Events</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/components/math">Math</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/components/compilation">Compilation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/components/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/components/gas-cost">Gas Usage and Cost</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Migration Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/verify">Verifying Smart Contracts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0/smart-contracts/math">Math</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Frontend App</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for CosmWasm Documentation <b>1.0</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/0.16/">latest version</a></b> (0.16).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 1.0</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Result and Option</h1></header><p>In Rust, using <code>Result</code> and <code>Option</code> types is very common. If you&#x27;ve used <code>fp-ts</code> in Typescript, functional features in
a language like Scala, or a strongly-typed functional language like Haskell, these should be familiar to you.</p><p>Both of these types are containers, or enum types. That is, they contain other values within variants.</p><p>If you&#x27;re familiar with Algebraic Data types, it might be enough to say that these are effectively:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">enum Option&lt;T&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Some(T), // existence</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    None, // non-existence</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">enum Result&lt;T, E&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Ok(T), // success</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Err(E), // failure</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="result"></a>Result<a class="hash-link" href="#result" title="Direct link to heading">#</a></h2><p><code>Result</code> is an enum type, <code>Result&lt;T, E&gt;</code>, where both <code>T</code> and <code>E</code> are generics, representing success and failure. These
are called like so:</p><ul><li><code>Ok(T)</code> - a <code>Result</code> container which has succeeded, containing <code>T</code></li><li><code>Err(E)</code> - a <code>Result</code> container which has failed, containing <code>E</code></li></ul><p>A result type is conceptually similar to an <code>Either</code> in other functional languages. Many contract entry points are typed
<code>Result&lt;Response, ContractError&gt;</code>. In this case, <code>Response</code> is the <code>Right</code> or <code>Success</code> branch, while <code>ContractError</code> is
the <code>Left</code> or failure case.</p><p><code>Result</code> types are not just used in entry points and handlers, however.</p><p>They are often used in functions used to match enums, for example in <code>execute</code> entry points.</p><p>We can see in CW20-base that <code>execute</code> is typed <code>Result&lt;Response, ContractError&gt;</code>. Let&#x27;s look at the function call in
the first branch, which matches <code>ExecuteMsg::Transfer</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">execute_transfer(deps, env, info, recipient, amount)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We might expect the match branches to call functions that are typed the same as the entry point. And <a href="https://github.com/CosmWasm/cw-plus/blob/main/contracts/cw20-base/src/contract.rs#L173" target="_blank" rel="noopener noreferrer">they
are</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn execute_transfer(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    deps: DepsMut,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    _env: Env,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    info: MessageInfo,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    recipient: String,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    amount: Uint128,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; Result&lt;Response, ContractError&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if amount == Uint128::zero() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return Err(ContractError::InvalidZeroAmount {});</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let rcpt_addr = deps.api.addr_validate(&amp;recipient)?;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    BALANCES.update(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        deps.storage,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &amp;info.sender,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        |balance: Option&lt;Uint128&gt;| -&gt; StdResult&lt;_&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Ok(balance.unwrap_or_default().checked_sub(amount)?)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )?;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    BALANCES.update(</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        deps.storage,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &amp;rcpt_addr,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        |balance: Option&lt;Uint128&gt;| -&gt; StdResult&lt;_&gt; { Ok(balance.unwrap_or_default() + amount) },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )?;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let res = Response::new()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .add_attribute(&quot;action&quot;, &quot;transfer&quot;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .add_attribute(&quot;from&quot;, info.sender)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .add_attribute(&quot;to&quot;, recipient)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .add_attribute(&quot;amount&quot;, amount);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Ok(res)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="stdresult"></a>StdResult<a class="hash-link" href="#stdresult" title="Direct link to heading">#</a></h3><p>It&#x27;s also worth being aware of <code>StdResult</code>. This is used often in <code>query</code> handlers and functions that are called from
them.</p><p>For example, in the <a href="https://github.com/CosmWasm/cw-examples/blob/main/contracts/nameservice/src/contract.rs#L95" target="_blank" rel="noopener noreferrer">nameservice
contract</a> you can see the
<code>StdResult</code>, which is like <code>Result</code>, except without a defined error branch:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[cfg_attr(not(feature = &quot;library&quot;), entry_point)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn query(deps: Deps, env: Env, msg: QueryMsg) -&gt; StdResult&lt;Binary&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    match msg {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        QueryMsg::ResolveRecord { name } =&gt; query_resolver(deps, env, name),</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        QueryMsg::Config {} =&gt; to_binary(&amp;config_read(deps.storage).load()?),</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Let&#x27;s see the implementation of <code>query_resolver</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">fn query_resolver(deps: Deps, _env: Env, name: String) -&gt; StdResult&lt;Binary&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let key = name.as_bytes();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let address = match resolver_read(deps.storage).may_load(key)? {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Some(record) =&gt; Some(String::from(&amp;record.owner)),</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        None =&gt; None,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let resp = ResolveRecordResponse { address };</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    to_binary(&amp;resp)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The key takeaway here is that generally you can ignore container types, so long as they all line up. Once all your types
are correct, your code will compile. Then you simply need to match or unwrap your container types correctly to work with
the values contained within.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="option"></a>Option<a class="hash-link" href="#option" title="Direct link to heading">#</a></h2><p>In Rust, there is no concept of <code>nil</code> or <code>null</code>, unlike most other mainstream programming languages. Instead, you have
the <code>Option</code> type, which encodes the idea of existence or non-existence into a container type.</p><p><code>Option&lt;T&gt;</code> is an enum type, with two variants:</p><ul><li><code>Some(&lt;wrapped-value&gt;)</code> - <code>Some</code> wraps an inner value, which can be accessed via <code>.unwrap()</code>. You will see this, as
well as matching, all over rust code.</li><li><code>None</code> - <code>None</code></li></ul><p>It&#x27;s useful for doing things like expressing that a value might not exist for a key in a struct:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[derive(Serialize, Deserialize, Clone, Debug, PartialEq, JsonSchema)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub struct Config {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pub purchase_price: Option&lt;Coin&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pub transfer_price: Option&lt;Coin&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The source is <a href="https://github.com/CosmWasm/cw-examples/blob/main/contracts/nameservice/src/state.rs#L13" target="_blank" rel="noopener noreferrer">here</a>. We can
see why this might be - these values come from
<a href="https://github.com/CosmWasm/cw-examples/blob/main/contracts/nameservice/src/msg.rs#L6" target="_blank" rel="noopener noreferrer">instantiation</a>, where the values
are also <code>Option</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[derive(Serialize, Deserialize, Clone, Debug, PartialEq, JsonSchema)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub struct InstantiateMsg {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pub purchase_price: Option&lt;Coin&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pub transfer_price: Option&lt;Coin&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In the <code>Result</code> examples above, we saw an example of <code>Option</code> usage. When we try and read the storage, there will either
be a result, or nothing. To handle situations like this, it&#x27;s common to use the <code>match</code> operator to pattern match the
two cases:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">let address = match resolver_read(deps.storage).may_load(key)? {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Some(record) =&gt; Some(String::from(&amp;record.owner)),</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    None =&gt; None,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In cases where <code>None</code> being returned would be an error state, convention dictates you should consider throwing an error
instead of handling the <code>None</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/InterWasm/docs/edit/main/docs/04-smart-contracts/02-components/02-result-option.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/1.0/smart-contracts/components/message"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Messages</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/1.0/smart-contracts/components/state/simple-state"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Simple State Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#result" class="table-of-contents__link">Result</a><ul><li><a href="#stdresult" class="table-of-contents__link">StdResult</a></li></ul></li><li><a href="#option" class="table-of-contents__link">Option</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Related Documentation</div><ul class="footer__items"><li class="footer__item"><a href="https://cosmos.network/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cosmos SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://hub.cosmos.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cosmos Hub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docs.tendermint.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Tendermint Core<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Repositories</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/CosmWasm/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CosmWasm/cosmwasm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/CosmWasm/wasmd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CosmWasm/wasmd<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/CosmWasm/cosmwasm-plus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CosmWasm/cosmwasm-plus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/CosmWasm/cawesome-wasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CosmWasm/cawesome-wasm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docs.cosmwasm.com/chat/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/CosmWasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://cosmwasm.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/img/logo_stacked.png" alt="CosmWasm Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/logo_stacked.png" alt="CosmWasm Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2021 CosmWasm</div></div></div></footer></div>
<script src="/assets/js/runtime~main.098888ff.js"></script>
<script src="/assets/js/main.2b084044.js"></script>
</body>
</html>